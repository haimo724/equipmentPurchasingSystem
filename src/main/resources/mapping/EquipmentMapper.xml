<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dsp.equipment.dao.EquipmentDAO">

    <resultMap id="BaseResultMap" type="com.dsp.equipment.entity.Equipment">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="eqId" jdbcType="VARCHAR" property="eqId"/>
        <result column="sortName" jdbcType="VARCHAR" property="sortName"/>
        <result column="eqName" jdbcType="VARCHAR" property="eqName"/>
        <result column="model" jdbcType="VARCHAR" property="model"/>
        <result column="unitPrice" jdbcType="DOUBLE" property="unitPrice"/>
        <result column="placeOfOrigin" jdbcType="VARCHAR" property="placeOfOrigin"/>
        <result column="supName" jdbcType="VARCHAR" property="supName"/>
        <result column="createTime" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="isEnd" jdbcType="VARCHAR" property="isEnd"/>
        <result column="isOk" jdbcType="VARCHAR" property="isOk"/>
        <result column="remakes" jdbcType="VARCHAR" property="remakes"/>
        <result column="isTime" jdbcType="TIMESTAMP" property="isTime"/>
        <result column="isUser" jdbcType="VARCHAR" property="isUser"/>
        <result column="isRes" jdbcType="VARCHAR" property="isRes"/>
        <result column="isType" jdbcType="VARCHAR" property="isType"/>
    </resultMap>

    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        eqId, sortName, eqName, model, unitPrice, placeOfOrigin, supName, createTime, isEnd,
        isOk, remakes,isUser,isTime,isRes,isType
    </sql>

    <insert id="insert" parameterType="com.dsp.equipment.entity.Equipment">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into equipment
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="eqId != null">
                eqId,
            </if>
            <if test="sortName != null">
                sortName,
            </if>
            <if test="eqName != null">
                eqName,
            </if>
            <if test="model != null">
                model,
            </if>
            <if test="unitPrice != null">
                unitPrice,
            </if>
            <if test="placeOfOrigin != null">
                placeOfOrigin,
            </if>
            <if test="supName != null">
                supName,
            </if>
            <if test="createTime != null">
                createTime,
            </if>
            <if test="isEnd != null">
                isEnd,
            </if>
            <if test="isOk != null">
                isOk,
            </if>
            <if test="remakes != null">
                remakes,
            </if>
            <if test="isTime != null">
                isTime,
            </if>
            <if test="isUser != null">
                isUser,
            </if>
            <if test="isRes != null">
                isRes,
            </if><if test="isType != null">
            isType,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="eqId != null">
                #{eqId,jdbcType=VARCHAR},
            </if>
            <if test="sortName != null">
                #{sortName,jdbcType=VARCHAR},
            </if>
            <if test="eqName != null">
                #{eqName,jdbcType=VARCHAR},
            </if>
            <if test="model != null">
                #{model,jdbcType=VARCHAR},
            </if>
            <if test="unitPrice != null">
                #{unitPrice,jdbcType=DOUBLE},
            </if>
            <if test="placeOfOrigin != null">
                #{placeOfOrigin,jdbcType=VARCHAR},
            </if>
            <if test="supName != null">
                #{supName,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isEnd != null">
                #{isEnd,jdbcType=VARCHAR},
            </if>
            <if test="isOk != null">
                #{isOk,jdbcType=VARCHAR},
            </if>
            <if test="remakes != null">
                #{remakes,jdbcType=VARCHAR},
            </if>
            <if test="isTime != null">
                #{isTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isUser != null">
                #{isUser,jdbcType=VARCHAR},
            </if>
            <if test="isRes != null">
                #{isRes,jdbcType=VARCHAR},
            </if> <if test="isType != null">
                #{isType,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>

    <update id="update" parameterType="com.dsp.equipment.entity.Equipment">

        update equipment
        <set>
            <if test="sortName != null">
                sortName = #{sortName,jdbcType=VARCHAR},
            </if>
            <if test="eqName != null">
                eqName = #{eqName,jdbcType=VARCHAR},
            </if>
            <if test="model != null">
                model = #{model,jdbcType=VARCHAR},
            </if>
            <if test="unitPrice != null">
                unitPrice = #{unitPrice,jdbcType=DOUBLE},
            </if>
            <if test="placeOfOrigin != null">
                placeOfOrigin = #{placeOfOrigin,jdbcType=VARCHAR},
            </if>
            <if test="supName != null">
                supName = #{supName,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                createTime = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="isEnd != null">
                isEnd = #{isEnd,jdbcType=VARCHAR},
            </if>
            <if test="isOk != null">
                isOk = #{isOk,jdbcType=VARCHAR},
            </if>
            <if test="remakes != null">
                remakes = #{remakes,jdbcType=VARCHAR},
            </if>
            <if test="isTime != null">
                isTime = #{isTime,jdbcType=VARCHAR},
            </if>
            <if test="isUser != null">
                isUser = #{isUser,jdbcType=VARCHAR},
            </if>
            <if test="isRes != null">
                isRes = #{isRes,jdbcType=VARCHAR},
            </if><if test="isType != null">
            isType = #{isType,jdbcType=VARCHAR},
            </if>
        </set>
        where eqId = #{eqId,jdbcType=VARCHAR}
    </update>

    <delete id="delete" parameterType="java.lang.String">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from equipment
        where eqId = #{eqId,jdbcType=VARCHAR}
    </delete>
    <!--获取未损坏设备-->
    <select id="all" parameterType="com.dsp.equipment.entity.Equipment"  resultMap="BaseResultMap">
        select e.*,s.sortName as sortName1,su.supName as supName1,sy.trueName as username from equipment e
         left join sort s on e.sortName = s.sortId left join supplier su on e.supName = su.supId
         left join sys_user sy on sy.id = e.isUser
        where 1=1 and e.isOk = 0 and e.isEnd = 0
        <if test="eqName!=null and eqName!=''">
            and e.eqName like CONCAT('%',#{eqName},'%')
        </if>
        <if test="eqId!=null and eqId!=''">
            and e.eqId like CONCAT('%',#{eqId},'%')
        </if>
    </select>
    <!--获取全部设备-->
    <select id="list" parameterType="com.dsp.equipment.entity.Equipment" resultMap="BaseResultMap">
        select e.*,s.sortName as sortName1,su.supName as supName1,sy.trueName as username from equipment e
        left join sort s on e.sortName = s.sortId left join supplier su on e.supName = su.supId
        left join sys_user sy on sy.id = e.isUser
        where 1=1
        <if test="eqName!=null and eqName!=''">
            and eqName like CONCAT('%',#{eqName},'%')
        </if>
        <if test="isType!=null and isType!=''">
            and e.isType = #{isType}
        </if>
    </select>
    <!--获取设备已过期-->
    <select id="listIsEnd" parameterType="com.dsp.equipment.entity.Equipment" resultMap="BaseResultMap">
        select e.*,s.sortName as sortName1,su.supName as supName1,sy.trueName as username from equipment e
        left join sort s on e.sortName = s.sortId left join supplier su on e.supName = su.supId
        left join sys_user sy on sy.id = e.isUser
        where 1=1 and isEnd = 1
        <if test="eqName!=null and eqName!=''">
            and eqName like CONCAT('%',#{eqName},'%')
        </if>
    </select>
    <!--获取设备已损坏-->
    <select id="listIsOk" parameterType="com.dsp.equipment.entity.Equipment" resultMap="BaseResultMap">
        select e.*,s.sortName as sortName1,su.supName as supName1,sy.trueName as username from equipment e
        left join sort s on e.sortName = s.sortId left join supplier su on e.supName = su.supId
        left join sys_user sy on sy.id = e.isUser
        where 1=1 and  isOk = 1
        <if test="eqName!=null and eqName!=''">
            and eqName like CONCAT('%',#{eqName},'%')
        </if>
        <if test="eqId!=null and eqId!=''">
            and e.eqId like CONCAT('%',#{eqId},'%')
        </if>
        <if test="isType!=null and isType!=''">
            and e.isType = #{isType}
        </if>
    </select>



</mapper>